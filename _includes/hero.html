<!-- _includes/hero.html -->
{%- assign section_key = include.section | default: "home" -%}
{%- assign herodata = site.data.heroes[section_key] -%}
{%- assign images = herodata.images | default: nil -%}
{%- assign overlay = herodata.overlay | default: "dark" -%}
{%- assign ctas = herodata.cta | default: nil -%}

{%- assign hero_title = include.title | default: page.title | default: "Connecting people, bees and knowledge" -%}
{%- assign hero_subtitle = include.subtitle | default: page.description | default: "" -%}

<section class="hero {% if overlay == 'light' %}overlay-light{% else %}overlay-dark{% endif %}">
  <div class="hero-media" data-images='{{ images | jsonify | default: "[]" }}'></div>
  <div class="hero-content container">
    <h1>{{ hero_title }}</h1>
    {% if hero_subtitle %}<p class="lead">{{ hero_subtitle }}</p>{% endif %}
    {% if ctas and ctas.size > 0 %}
    <div class="hero-actions">
      {% for item in ctas %}
        {% assign v = item.variant | default: "" %}
        <a class="btn {% if v == 'light' %}ghost{% endif %}" href="{{ item.href | relative_url }}">{{ item.label }}</a>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</section>

<script>
(function() {
  try {
    var section = document.currentScript.previousElementSibling.previousElementSibling;
    var media = section && section.querySelector('.hero-media');
    if (!media || !media.dataset.images) return;
    var imgs = JSON.parse(media.dataset.images);
    if (Array.isArray(imgs) && imgs.length) {
      var chosen = imgs[Math.floor(Math.random() * imgs.length)];
      if (typeof chosen === 'string') {
        media.style.setProperty('--hero-image', 'url("' + chosen + '")');
      }
    }
  } catch (e) { /* no-op */ }
})();
</script>
